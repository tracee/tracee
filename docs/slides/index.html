<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>tracEE - Diagnosis context propagation in distributed JavaEE applications</title>

    <meta name="description" content="TracEE - Diagnosis context propagation in distributed JavaEE applications">
    <meta name="author" content="Daniel Wegener">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h1>TracEE</h1>

            <h3>Diagnosis context propagation in distributed JavaEE applications</h3>

            <p>
                <small><a href="https://github.com/holisticon/tracee">https://github.com/holisticon/tracee</a></small>
            </p>
        </section>


        <section>
            <blockquote>
                &ldquo;What <strong>caused</strong> this *** Exception
            </blockquote>
        </section>

        <section data-markdown>
            <script type="text/template">
                * grep catalina.out/server.log ...
                * No fun on many™ machines
                * Log aggregator (Kibana?)
                    * Find exception
                    * Filter thread
                    * This works for one “system”
                * Prove
            </script>


            <aside class="notes">
                none
            </aside>
        </section>

        <section>
            <h2>tracEE to the rescue</h2>
        </section>

        <section>
            <h2>Supports</h2>
            <ul>
                <li>Transports or 'invents' invocation context data</li>
                <li>Enriches logging (MDC)</li>
                <li>Propagates context to remote systems</li>
                <li>Propagates context through asynchronous processing (JMS, Servlet3 async)</li>
            </ul>
        </section>

        <section data-markdown>
            <script type="text/template">
                ## What is a context (in terms of tracEE)?

                * RequestId
                    * Incoming Http-Paramter
                    * or _artificial_
                * SessionId (masked)
                * CorrelationId from external system
                * ConversationId from fat browser app
                * SSO-Token
            </script>
        </section>

        <section>
            tbd: Nice picture of standard flow with browser/servlet/soap-backend
        </section>

        <section>
            tbd: nice picture of how tracee works
        </section>

        <section data-markdown>
            <script type="text/template">
                ## How to use?

                * Configure “Incoming-Handlers”
                    * TraceeFilter (Servlet)
                    * or SpringTraceeFilter (Spring Interceptor)
                    * or TraceeServerHandler (SOAP)
                * Configure “Propagators”
                    * HttpClientPropagator (Apache HttpClient, REST)
                    * TraceeClientHandler (SOAP)
            </script>
        </section>

        <section>
            <h2>Configure Logging</h2>
            Context is accessible from MDC
					<pre><code data-trim contenteditable>
                        <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
                            <layout>
                                <Pattern>rqId: %X{requestId} sId: %X{sessionId} - %m%n</Pattern>
                            </layout>
                        </appender>
                    </code></pre>
        </section>

        <section data-markdown>
            <script type="text/template">
                ## Profit!

                Lets look at Kibana again
                Find an exception:

                2013-12-05 12:40:00,911 rxId:AFFEB00B1337 sId: 1342536546576
                ERROR [de.random.impl.ServingServiceBean] (ajp-172.27.138.131-11009-60)
                Exception during auth: Bad bongo


                Now search for “AFFEB00B1337” and you will find ANY log entry that was raised by this user interaction with the system

                Or search for “1342536546576” and you will find ANY log entry that was raised because of a user interaction from the user with this session
            </script>
        </section>
        <section data-markdown>
            <script type="text/template">
                ## Inside tracEE

                * Expectation: JavaEE = thread-per-connection
                * Exceptions: AsyncServlet, JMS
                * Storing context in a ThreadLocal
                * Reusing the MDC
                * Or use a simple ThreadLocalBackend
            </script>
        </section>
        <section data-markdown>
            <script type="text/template">
                ## I can haz more?

                * Exception-Logging with full protocol specific  (wire HTTP-Requests) invocation parameters
                * SessionLifecycleListener stores sessionId in the context as soon as it exists
                * SPI: Roll your own Protocol-Adapters
            </script>
        </section>
        <section data-markdown>
            <script type="text/template">
                ## known limitations

                * RemoteEJB cannot be supported by spec. Custom container implementations might work.

                * Accumulation of sessions from different frontends might be difficult.
            </script>
        </section>

        <section>
            <h1>THE END</h1>

            <h3>BY Daniel Wegener, Tobias Gindler / <a href="https://www.holisticon.de">holisticon.de</a></h3>
        </section>

    </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            { src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            { src: 'plugin/notes/notes.js', async: true, condition: function () {
                return !!document.body.classList;
            } }
        ]
    });

</script>

</body>
</html>
